INSTALL ZIP: C:\p\c++\patch\v14_patch_fast_only_movement.zip
TIME: 2026-02-23 03:02:48
TARGET_ROOT: C:\p\c++\vPlotterV1
DEST (DEST_SUBDIR): C:\p\c++\vPlotterV1
VERSION:  PATCH_ID: 
INSTALL_TXT: (none)
BACKUP_ENABLED: True
BACKUP_ZIP: C:\p\c++\backup\backup_vPlotterV1_vnone_none_20260223_030229.zip
PRECHECK: replace=1 add=0 total=1

--- DIFF (line numbers) src/movement.cpp ---
HUNK old 1-4  new 1-4
- old:     1 #include <math.h>
+ new:     1 #include <cmath>
HUNK old 12-29  new 12-30
- old:    15     leftMotor = new AccelStepper(AccelStepper::DRIVER, LEFT_STEP_PIN, LEFT_DIR_PIN);
+ new:    15     // FastAccelStepper backend (no AccelStepper usage anywhere in Movement)
+ new:    16     leftMotor = new FastStepperBackend(LEFT_STEP_PIN, LEFT_DIR_PIN);
+ new:    17     leftMotor->setPinsInverted(false);
- old:    18     leftMotor->setPinsInverted(false);
- old:    19     leftMotor->setMinPulseWidth(_leftPulseWidthUs);
+ new:    20     leftMotor->setMinPulseWidth(_leftPulseWidthUs); // no-op on FastAccelStepper, kept for API compatibility
- old:    22     rightMotor = new AccelStepper(AccelStepper::DRIVER, RIGHT_STEP_PIN, RIGHT_DIR_PIN);
- old:    23     rightMotor->setPinsInverted(true, false, false);
+ new:    23     rightMotor = new FastStepperBackend(RIGHT_STEP_PIN, RIGHT_DIR_PIN);
+ new:    24     rightMotor->setPinsInverted(true);
- old:    26     rightMotor->setMinPulseWidth(_rightPulseWidthUs);
+ new:    27     rightMotor->setMinPulseWidth(_rightPulseWidthUs); // no-op on FastAccelStepper, kept for API compatibility
HUNK old 445-452  new 446-454
- old:   448   if (leftMotor)  leftMotor->setEnablePin(_leftEnablePin);
- old:   449   if (rightMotor) rightMotor->setEnablePin(_rightEnablePin);
+ new:   449   // Most stepper drivers use EN as active-low. Keep this consistent.
+ new:   450   if (leftMotor)  leftMotor->configureEnablePin(_leftEnablePin, true);
+ new:   451   if (rightMotor) rightMotor->configureEnablePin(_rightEnablePin, true);

CHANGELOG: C:\p\c++\vPlotterV1\CHANGELOG_unknown_20260223_030248.md
INSTALL DONE
